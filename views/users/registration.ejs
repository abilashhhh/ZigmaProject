  <%- include('../partials/userHeader.ejs') %>
    <%- include('../partials/pageTopPanel.ejs') %>

      <div class="page-header breadcrumb-wrap">
        <div class="container">
          <div class="breadcrumb">
            <a href="/" rel="nofollow">Home</a>
            <span></span> Create Account
          </div>

        </div>
      </div>

      <section class="pt-100 pb-150 d-flex justify-content-center">
        <div class="container">
          <div class="row">
            <div class="m-auto d-flex justify-content-center">
              <div class="row d-flex col-lg-5 justify-content-center">
                <div class="col-lg-12">
                  <div
                    class="login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5  border-4">

                    <div class="heading_s1">
                      <h3 class="mb-30">Create an Account</h3>
                    </div>
                    <p class="mb-50 font-sm">
                      Your personal data will be used to support your experience
                      throughout this website, to manage access to your account,
                      and for other purposes described in our privacy policy
                    </p>
                    <form method="post" action="/register" onsubmit="return validateForm()">
                      <div class="form-group">
                        <input type="text" required="" name="username" placeholder="Username" id="username" />
                        <p id="usernameModify" style="color: red;"> </p>
                      </div>

                      <div class="form-group">
                        <input type="text" required="" name="email" placeholder="Email" id="email" />
                        <p id="emailModify" style="color: red;"> </p>
                      </div>

                      <div class="form-group">
                        <input type="text" required="" name="mobile" placeholder="Mobile Number" id="mobile" />
                        <p id="mobileModify" style="color: red;"> </p>
                      </div>

                      <div class="form-group">
                        <input required="" type="password" name="password" placeholder="Password" id="password" />
                        <p id="passwordModify" style="color: red;"> </p>
                      </div>

                      <div class="form-group">
                        <input required="" type="password" name="confirmPassword" placeholder="Confirm password"
                          id="confirmPassword" />
                        <p id="confirmPasswordModify" style="color: red;"> </p>
                      </div>

                      <div class="form-group">
                        <button type="submit" class="btn btn-fill-out btn-block hover-up" name="login">
                          Register
                        </button>
                      </div>

                      <% if (typeof message !=='undefined' ) { %>
                        <div id="message-container">
                          <h5 style="font-size: large; color: red; margin: 20px;">
                            <%= message %>
                          </h5>
                        </div>
                        <script>
                          setTimeout(() => {
                            document.getElementById("message-container").style.display = "none";
                          }, 3000);
                        </script>
                        <% } %>
                    </form>

                    <div class="text-muted text-center">
                      <strong>Already have an account? <a href="/login">Sign in now</a></strong>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-1"></div>
            </div>
          </div>
        </div>
        </div>
      </section>
      </body>

      <script>


        function validateForm() {

          //username
          // Get the values entered by the user
          var username = document.getElementById('username').value;
          var email = document.getElementById('email').value;
          var mobile = document.getElementById('mobile').value;
          var password = document.getElementById('password').value;
          var confirmPassword = document.getElementById('confirmPassword').value;

          // Check if the username is empty
          if (username.trim() === '') {
            // Display an error message for username
            document.getElementById('usernameModify').innerText = 'Username cannot be empty';
            return false; // Prevent the form from submitting
          } else {
            // Clear any previous error messages for username
            document.getElementById('usernameModify').innerText = '';
          }

          // email
          var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+/;
          if (email.trim() === '') {
            document.getElementById('emailModify').innerText = 'Email cannot be empty';
            return false;
          } else if (!emailRegex.test(email)) {
            document.getElementById('emailModify').innerText = 'Invalid email format';
            return false;
          } else {
            document.getElementById('emailModify').innerText = '';
          }

          // mobile
          var mobileRegex = /^\d+$/;
          if (mobile.trim() === '') {
            document.getElementById('mobileModify').innerText = 'Mobile number cannot be empty';
            return false;
          } else if (!mobileRegex.test(mobile)) {
            document.getElementById('mobileModify').innerText = 'Invalid mobile number format';
            return false;
          } else if (mobile.length !== 10) {
            document.getElementById('mobileModify').innerText = 'Mobile number should be 10 digits long';
            return false;
          } else {
            document.getElementById('mobileModify').innerText = '';
          }

          // password
          if (password.trim() === '') {
            document.getElementById('passwordModify').innerText = 'Password cannot be blank spaces';
            return false;
          } else if (password.length < 8) {
            document.getElementById('passwordModify').innerText = 'Password must be at least 8 characters long';
            return false;
          } else {
            document.getElementById('passwordModify').innerText = '';
          }

          // confirm password
          if (confirmPassword.trim() === '') {
            document.getElementById('confirmPasswordModify').innerText = 'Confirm password cannot be blank spaces';
            return false;
          } else if (confirmPassword !== password) {
            document.getElementById('confirmPasswordModify').innerText = 'Passwords do not match';
            return false;
          } else {
            document.getElementById('confirmPasswordModify').innerText = '';
          }

          //checking both are same or not
          if (password === confirmPassword) {
            document.getElementById('passwordModify').innerText = '';
            document.getElementById('confirmPasswordModify').innerText = '';
          } else if (password !== confirmPassword) {
            document.getElementById('confirmPasswordModify').innerText = 'Passwords do not match';
            document.getElementById('passwordModify').innerText = 'Passwords do not match';
          }
          // If all fields are valid, allow the form to submit
          return true;
        }

      </script>


      <%- include('../partials/userAboveFooterPanel.ejs') %>
        <%- include('../partials/userFooter.ejs') %>